{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kamil\\\\Documents\\\\GitHub\\\\LepszyUPEL\\\\src\\\\PersistLogin.js\";\nimport { Outlet } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport useRefreshToken from \"../hooks/useRefreshToken\";\nimport useAuth from \"../hooks/useAuth\";\nconst PersistLogin = () => {\n  const [isLoading, setIsLoading] = useState(true);\n  const refresh = useRefreshToken();\n  const {\n    auth,\n    persist\n  } = useAuth();\n  useEffect(() => {\n    let isMounted = true;\n    const verifyRefreshToken = async () => {\n      try {\n        await refresh();\n      } catch (err) {\n        console.error(err);\n      } finally {\n        isMounted && setIsLoading(false);\n      }\n    };\n\n    // Avoids unwanted call to verifyRefreshToken\n    !(auth === null || auth === void 0 ? void 0 : auth.accessToken) && persist ? verifyRefreshToken() : setIsLoading(false);\n    return () => isMounted = false;\n  }, []);\n  useEffect(() => {\n    console.log(`isLoading: ${isLoading}`);\n    console.log(`aT: ${JSON.stringify(auth === null || auth === void 0 ? void 0 : auth.accessToken)}`);\n  }, [isLoading]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !persist ? /*#__PURE__*/React.createElement(Outlet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 19\n    }\n  }) : isLoading ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 44\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(Outlet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 64\n    }\n  }));\n};\nexport default PersistLogin;","map":{"version":3,"names":["Outlet","useState","useEffect","useRefreshToken","useAuth","PersistLogin","isLoading","setIsLoading","refresh","auth","persist","isMounted","verifyRefreshToken","err","console","error","accessToken","log","JSON","stringify"],"sources":["C:/Users/kamil/Documents/GitHub/LepszyUPEL/src/PersistLogin.js"],"sourcesContent":["import { Outlet } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport useRefreshToken from \"../hooks/useRefreshToken\";\r\nimport useAuth from \"../hooks/useAuth\";\r\n\r\nconst PersistLogin = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const refresh = useRefreshToken();\r\n  const { auth, persist } = useAuth();\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const verifyRefreshToken = async () => {\r\n      try {\r\n        await refresh();\r\n      } catch (err) {\r\n        console.error(err);\r\n      } finally {\r\n        isMounted && setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    // Avoids unwanted call to verifyRefreshToken\r\n    !auth?.accessToken && persist ? verifyRefreshToken() : setIsLoading(false);\r\n\r\n    return () => (isMounted = false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(`isLoading: ${isLoading}`);\r\n    console.log(`aT: ${JSON.stringify(auth?.accessToken)}`);\r\n  }, [isLoading]);\r\n\r\n  return (\r\n    <>{!persist ? <Outlet /> : isLoading ? <p>Loading...</p> : <Outlet />}</>\r\n  );\r\n};\r\n\r\nexport default PersistLogin;\r\n"],"mappings":";AAAA,SAASA,MAAM,QAAQ,kBAAkB;AACzC,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,eAAe,MAAM,0BAA0B;AACtD,OAAOC,OAAO,MAAM,kBAAkB;AAEtC,MAAMC,YAAY,GAAG,MAAM;EACzB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAMO,OAAO,GAAGL,eAAe,EAAE;EACjC,MAAM;IAAEM,IAAI;IAAEC;EAAQ,CAAC,GAAGN,OAAO,EAAE;EAEnCF,SAAS,CAAC,MAAM;IACd,IAAIS,SAAS,GAAG,IAAI;IAEpB,MAAMC,kBAAkB,GAAG,YAAY;MACrC,IAAI;QACF,MAAMJ,OAAO,EAAE;MACjB,CAAC,CAAC,OAAOK,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MACpB,CAAC,SAAS;QACRF,SAAS,IAAIJ,YAAY,CAAC,KAAK,CAAC;MAClC;IACF,CAAC;;IAED;IACA,EAACE,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEO,WAAW,KAAIN,OAAO,GAAGE,kBAAkB,EAAE,GAAGL,YAAY,CAAC,KAAK,CAAC;IAE1E,OAAO,MAAOI,SAAS,GAAG,KAAM;EAClC,CAAC,EAAE,EAAE,CAAC;EAENT,SAAS,CAAC,MAAM;IACdY,OAAO,CAACG,GAAG,CAAE,cAAaX,SAAU,EAAC,CAAC;IACtCQ,OAAO,CAACG,GAAG,CAAE,OAAMC,IAAI,CAACC,SAAS,CAACV,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEO,WAAW,CAAE,EAAC,CAAC;EACzD,CAAC,EAAE,CAACV,SAAS,CAAC,CAAC;EAEf,oBACE,0CAAG,CAACI,OAAO,gBAAG,oBAAC,MAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,GAAGJ,SAAS,gBAAG;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAAiB,gBAAG,oBAAC,MAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,CAAI;AAE7E,CAAC;AAED,eAAeD,YAAY"},"metadata":{},"sourceType":"module"}