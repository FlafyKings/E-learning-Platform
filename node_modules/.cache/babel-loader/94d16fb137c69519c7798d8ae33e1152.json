{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kamil\\\\Documents\\\\GitHub\\\\LepszyUPEL\\\\src\\\\RequireAuth.js\";\nimport React, { useEffect } from \"react\";\nimport { useLocation, Navigate, Outlet } from \"react-router-dom\";\nimport { useContext } from \"react\";\nimport AuthContext from \"./context/AuthProvider\";\nconst RequireAuth = _ref => {\n  var _auth$roles;\n  let {\n    allowedRoles\n  } = _ref;\n  const {\n    auth\n  } = useContext(AuthContext);\n  const location = useLocation();\n  useEffect(() => {\n    this.forceUpdate();\n  }, [auth]);\n  console.log(auth, allowedRoles);\n  return (auth === null || auth === void 0 ? void 0 : (_auth$roles = auth.roles) === null || _auth$roles === void 0 ? void 0 : _auth$roles.find(role => allowedRoles === null || allowedRoles === void 0 ? void 0 : allowedRoles.includes(role))) ? /*#__PURE__*/React.createElement(Outlet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 5\n    }\n  }) : (auth === null || auth === void 0 ? void 0 : auth.user) ? /*#__PURE__*/React.createElement(Navigate, {\n    to: \"/unauthorized\",\n    state: {\n      from: location\n    },\n    replace: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(Navigate, {\n    to: \"/login\",\n    state: {\n      from: location\n    },\n    replace: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 5\n    }\n  });\n};\nexport default RequireAuth;","map":{"version":3,"names":["React","useEffect","useLocation","Navigate","Outlet","useContext","AuthContext","RequireAuth","allowedRoles","auth","location","forceUpdate","console","log","roles","find","role","includes","user","from"],"sources":["C:/Users/kamil/Documents/GitHub/LepszyUPEL/src/RequireAuth.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useLocation, Navigate, Outlet } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport AuthContext from \"./context/AuthProvider\";\r\n\r\nconst RequireAuth = ({ allowedRoles }) => {\r\n  const { auth } = useContext(AuthContext);\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    this.forceUpdate();\r\n  }, [auth]);\r\n\r\n  console.log(auth, allowedRoles);\r\n  return auth?.roles?.find((role) => allowedRoles?.includes(role)) ? (\r\n    <Outlet />\r\n  ) : auth?.user ? (\r\n    <Navigate to=\"/unauthorized\" state={{ from: location }} replace />\r\n  ) : (\r\n    <Navigate to=\"/login\" state={{ from: location }} replace />\r\n  );\r\n};\r\n\r\nexport default RequireAuth;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,kBAAkB;AAChE,SAASC,UAAU,QAAQ,OAAO;AAClC,OAAOC,WAAW,MAAM,wBAAwB;AAEhD,MAAMC,WAAW,GAAG,QAAsB;EAAA;EAAA,IAArB;IAAEC;EAAa,CAAC;EACnC,MAAM;IAAEC;EAAK,CAAC,GAAGJ,UAAU,CAACC,WAAW,CAAC;EACxC,MAAMI,QAAQ,GAAGR,WAAW,EAAE;EAE9BD,SAAS,CAAC,MAAM;IACd,IAAI,CAACU,WAAW,EAAE;EACpB,CAAC,EAAE,CAACF,IAAI,CAAC,CAAC;EAEVG,OAAO,CAACC,GAAG,CAACJ,IAAI,EAAED,YAAY,CAAC;EAC/B,OAAO,CAAAC,IAAI,aAAJA,IAAI,sCAAJA,IAAI,CAAEK,KAAK,gDAAX,YAAaC,IAAI,CAAEC,IAAI,IAAKR,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAES,QAAQ,CAACD,IAAI,CAAC,CAAC,iBAC9D,oBAAC,MAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,GACR,CAAAP,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAES,IAAI,iBACZ,oBAAC,QAAQ;IAAC,EAAE,EAAC,eAAe;IAAC,KAAK,EAAE;MAAEC,IAAI,EAAET;IAAS,CAAE;IAAC,OAAO;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,gBAElE,oBAAC,QAAQ;IAAC,EAAE,EAAC,QAAQ;IAAC,KAAK,EAAE;MAAES,IAAI,EAAET;IAAS,CAAE;IAAC,OAAO;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACzD;AACH,CAAC;AAED,eAAeH,WAAW"},"metadata":{},"sourceType":"module"}