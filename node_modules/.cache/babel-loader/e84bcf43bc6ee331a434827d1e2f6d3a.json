{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kamil\\\\Documents\\\\GitHub\\\\LepszyUPEL\\\\src\\\\PersistLogin.js\";\nimport React from \"react\";\nimport { Outlet } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport useRefreshToken from \"./hooks/useRefreshToken\";\nimport useAuth from \"./hooks/useAuth\";\nconst PersistLogin = () => {\n  const [isLoading, setIsLoading] = useState(true);\n  const refresh = useRefreshToken();\n  const {\n    auth,\n    persist\n  } = useAuth();\n  useEffect(() => {\n    //let isMounted = true;\n\n    const verifyRefreshToken = async () => {\n      try {\n        await refresh();\n      } catch (err) {\n        console.error(err);\n      } finally {\n        /* isMounted && */setIsLoading(false);\n      }\n    };\n\n    // Avoids unwanted call to verifyRefreshToken\n    !(auth === null || auth === void 0 ? void 0 : auth.accessToken) ? verifyRefreshToken() : setIsLoading(false);\n\n    //return () => (isMounted = false);\n  }, []);\n  useEffect(() => {\n    console.log(`isLoading: ${isLoading}`);\n    console.log(`aT: ${JSON.stringify(auth === null || auth === void 0 ? void 0 : auth.accessToken)}`);\n  }, [isLoading]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, isLoading ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 25\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(Outlet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 45\n    }\n  }));\n};\nexport default PersistLogin;","map":{"version":3,"names":["React","Outlet","useState","useEffect","useRefreshToken","useAuth","PersistLogin","isLoading","setIsLoading","refresh","auth","persist","verifyRefreshToken","err","console","error","accessToken","log","JSON","stringify"],"sources":["C:/Users/kamil/Documents/GitHub/LepszyUPEL/src/PersistLogin.js"],"sourcesContent":["import React from \"react\";\r\nimport { Outlet } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport useRefreshToken from \"./hooks/useRefreshToken\";\r\nimport useAuth from \"./hooks/useAuth\";\r\n\r\nconst PersistLogin = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const refresh = useRefreshToken();\r\n  const { auth, persist } = useAuth();\r\n\r\n  useEffect(() => {\r\n    //let isMounted = true;\r\n\r\n    const verifyRefreshToken = async () => {\r\n      try {\r\n        await refresh();\r\n      } catch (err) {\r\n        console.error(err);\r\n      } finally {\r\n        /* isMounted && */ setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    // Avoids unwanted call to verifyRefreshToken\r\n    !auth?.accessToken ? verifyRefreshToken() : setIsLoading(false);\r\n\r\n    //return () => (isMounted = false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(`isLoading: ${isLoading}`);\r\n    console.log(`aT: ${JSON.stringify(auth?.accessToken)}`);\r\n  }, [isLoading]);\r\n\r\n  return <>{isLoading ? <p>Loading...</p> : <Outlet />}</>;\r\n};\r\n\r\nexport default PersistLogin;\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,MAAM,QAAQ,kBAAkB;AACzC,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,eAAe,MAAM,yBAAyB;AACrD,OAAOC,OAAO,MAAM,iBAAiB;AAErC,MAAMC,YAAY,GAAG,MAAM;EACzB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAMO,OAAO,GAAGL,eAAe,EAAE;EACjC,MAAM;IAAEM,IAAI;IAAEC;EAAQ,CAAC,GAAGN,OAAO,EAAE;EAEnCF,SAAS,CAAC,MAAM;IACd;;IAEA,MAAMS,kBAAkB,GAAG,YAAY;MACrC,IAAI;QACF,MAAMH,OAAO,EAAE;MACjB,CAAC,CAAC,OAAOI,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MACpB,CAAC,SAAS;QACR,kBAAmBL,YAAY,CAAC,KAAK,CAAC;MACxC;IACF,CAAC;;IAED;IACA,EAACE,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEM,WAAW,IAAGJ,kBAAkB,EAAE,GAAGJ,YAAY,CAAC,KAAK,CAAC;;IAE/D;EACF,CAAC,EAAE,EAAE,CAAC;EAENL,SAAS,CAAC,MAAM;IACdW,OAAO,CAACG,GAAG,CAAE,cAAaV,SAAU,EAAC,CAAC;IACtCO,OAAO,CAACG,GAAG,CAAE,OAAMC,IAAI,CAACC,SAAS,CAACT,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEM,WAAW,CAAE,EAAC,CAAC;EACzD,CAAC,EAAE,CAACT,SAAS,CAAC,CAAC;EAEf,oBAAO,0CAAGA,SAAS,gBAAG;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAAiB,gBAAG,oBAAC,MAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,CAAI;AAC1D,CAAC;AAED,eAAeD,YAAY"},"metadata":{},"sourceType":"module"}